# IRIDA — Workflow: чаты, режимы, передача контекста

## Цель
Вести проект месяцами без потери контекста, без деградации архитектуры и без случайного “сломали работающее”.

## Базовые правила
- Всегда начинаем с плана → риски → шаги.
- Одна операция за шаг (в одном ответе — одна группа команд).
- Любая правка, которая может ломать поведение, сопровождается:
  - бэкапом/копией файла (если нужно),
  - проверками (dart analyze / flutter test / smoke),
  - откатом (как вернуть назад).
- Для коммерческого продукта: приоритет надежности и трассируемости над скоростью.

## Режимы работы (MODE)
- ARCHITECT MODE
  - Архитектура, границы модулей, контракты, ADR, риски, порядок работ.
- IMPLEMENT MODE
  - Пошаговая реализация, полные файлы, миграции, тесты.
- OPS MODE
  - Запуск, стабильность, туннели/доступность, логи, проверки, релизные процедуры.
- QA MODE
  - Чек-листы, тест-план, воспроизведение, регрессия, E2E smoke.

## Первый чат (старт)
1) docs/GPT_START.md
2) docs/PROJECT_CONTEXT.md
3) PROMPT задачи (что именно делаем сейчас)
4) Команда: Act in ARCHITECT MODE.

## Переход в новый чат
В конце текущего чата:
- “Составь CONTEXT HANDOFF для нового чата.”

В новом чате вставляем:
1) docs/GPT_START.md
2) docs/PROJECT_CONTEXT.md
3) CONTEXT HANDOFF (из прошлого чата)
4) Команда: Act in … MODE. (например IMPLEMENT MODE)

## Что это гарантирует
- контекст не теряется
- изменения выполняются контролируемо
- архитектура не деградирует
- новые чаты = продолжение старых
- можно вести проект долго до полного запуска

## Политика “не ломать работающее”
- Любая интеграция, особенно AI и камера, делается через feature-toggle/безопасные фолбэки.
- Любая “опасная” правка сначала проходит smoke в dev, потом — только после подтверждения.
